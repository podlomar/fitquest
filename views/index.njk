<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness Tracker</title>
  <link rel="stylesheet" href="/styles.css">
</head>

<body>
  <div class="container">
    <header>
      <h1>🏃‍♂️ Fitness Tracker</h1>
      <p>Your fitness journey at a glance</p>
    </header>

    <main>
      <!-- Summary Statistics -->
      <div class="summary-section">
        <div class="summary-cards">
          <div class="summary-card">
            <div class="summary-icon">📅</div>
            <div class="summary-content">
              <div class="summary-number">{{ stats.totalDays }}</div>
              <div class="summary-label">Total Days</div>
            </div>
          </div>
          
          <div class="summary-card">
            <div class="summary-icon">🏃‍♂️</div>
            <div class="summary-content">
              <div class="summary-number">{{ stats.totalDistance }} km</div>
              <div class="summary-label">Total Distance</div>
            </div>
          </div>
          
          <div class="summary-card">
            <div class="summary-icon">🧘‍♀️</div>
            <div class="summary-content">
              <div class="summary-number">{{ stats.stretchingStreak }}</div>
              <div class="summary-label">Stretching Streak</div>
            </div>
          </div>
          
          <div class="summary-card">
            <div class="summary-icon">⭐</div>
            <div class="summary-content">
              <div class="summary-number">{{ stats.avgPerformance if stats.avgPerformance > 0 else '-' }}</div>
              <div class="summary-label">Avg Performance</div>
            </div>
          </div>
          
          <div class="summary-card">
            <div class="summary-icon">🏃‍♀️</div>
            <div class="summary-content">
              <div class="summary-number">{{ stats.bestStairsTime if stats.bestStairsTime else '-' }}</div>
              <div class="summary-label">Best 8 Flights</div>
            </div>
          </div>
        </div>
      </div>

      <div class="table-wrapper">
        <table class="fitness-table">
          <thead>
            <tr>
              <th>Date</th>
              <th>Track</th>
              <th>Progress</th>
              <th>Performance</th>
              <th>Workout</th>
              <th>Stretching</th>
              <th>Stairs</th>
            </tr>
          </thead>
          <tbody>
            {% for entry in data %}
              <tr>
                <td data-label="Date">
                  {{ entry.date | formatDate }}
                </td>
                <td data-label="Track">
                  {% if entry.running and entry.running.track %}
                    {% if entry.running.track.url %}
                      <a href="{{ entry.running.track.url }}" target="_blank" class="track-link">
                        {{ entry.running.track.name }} ({{ entry.running.track.length }} km)
                      </a>
                    {% else %}
                      {{ entry.running.track.name }}
                    {% endif %}
                  {% else %}
                    -
                  {% endif %}
                </td>
                <td data-label="Progress">
                  {% if entry.running and entry.running.track and entry.running.track.progress %}
                    <span class="progress">
                      {{ entry.running.track.progress }}
                    </span>
                  {% else %}
                    -
                  {% endif %}
                </td>
                <td data-label="Performance">
                  {% if entry.running and entry.running.performance and entry.running.performance != 'none' %}
                    <div class="performance-rating">
                      {% for i in range(1, 6) %}
                        <span class="star {{ 'filled' if i <= entry.running.performance else '' }}">★</span>
                      {% endfor %}
                    </div>
                  {% else %}
                    <span class="performance-none">-</span>
                  {% endif %}
                </td>
                <td data-label="Workout">
                  {% if entry.workout %}
                    {% if entry.workout == 'rest' %}
                      <span class="workout-rest">Rest</span>
                    {% elif entry.workout.level %}
                      <div class="workout-info">
                        <span class="level level-{{ entry.workout.level }}">
                          {{ entry.workout.level }}
                        </span>
                        {% if entry.workout.content %}
                          <div class="workout-content">
                            {{ entry.workout.content }}
                          </div>
                        {% endif %}
                      </div>
                    {% else %}
                      {{ entry.workout }}
                    {% endif %}
                  {% else %}
                    -
                  {% endif %}
                </td>
                <td data-label="Stretching">
                  <span class="status {{ 'yes' if entry.stretching else 'no' }}">
                    {{ '✓' if entry.stretching else '✗' }}
                  </span>
                </td>
                <td data-label="Stairs">
                  {% if entry.stairs %}
                    {% if entry.stairs == 'away' %}
                      <span class="stairs-away">Away</span>
                    {% elif entry.stairs == 'none' %}
                      <span class="stairs-none">-</span>
                    {% elif entry.stairs.floors %}
                      <div class="stairs-info">
                        <span class="stairs-floors">{{ entry.stairs.floors }} floors</span>
                        {% if entry.stairs.time %}
                          <span class="stairs-time">{{ entry.stairs.time }}</span>
                        {% endif %}
                      </div>
                    {% else %}
                      <span class="stairs">{{ entry.stairs }}</span>
                    {% endif %}
                  {% else %}
                    -
                  {% endif %}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      {% if data.length == 0 %}
        <div class="no-data">
          <p>No fitness data available</p>
        </div>
      {% endif %}
    </main>

    <footer>
      <p>Keep up the great work! 💪</p>
    </footer>
  </div>
</body>

</html>
